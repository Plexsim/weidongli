
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<!-- Mirrored from game.9g.com/baby/index.html?sukey=523d6c223ffb3311e63fdbb75fb1a9005c41d740cee43599e32dac2bebf5f15d2e663a829addd1d337e96a77d4990579 by HTTrack Website Copier/3.x [XR&CO'2013], Mon, 01 Dec 2014 06:07:04 GMT --><head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<title>测测你未来的小孩什么样？</title>
<meta http-equiv="X-UA-Compatible" content="chrome=1">
<meta name="viewport" content="width=device-width,minimum-scale=1.0">
<script type="text/javascript" src="./source/modules/baby/template/js/jquery.min.js"></script>
<script type="text/javascript">
		var _config = {}; _config['isSite'] = 'http://wxfile.youxiyule.com/';
</script>
<style type="text/css">
body{background-color:#ffffff;font-family:"Microsoft Yahei",Arial,Helvetica,sans-serif,"宋体";}
.button{padding:10px;}
.info{font-size:18px;padding:5px 0;}
a{text-decoration:none;color:#545164;}
a:visited{color:#999;}.red{color:red;}
#more{margin:10px auto;width:300px;text-align:left;}
#main{border:1px solid #666;cursor:pointer;}
img.output{border:1px solid #666;}
#jindu{margin:160px auto;width:300px;}
#loading{width:300px;height:49px;background:url(./source/modules/baby/template/img/25/bak.gif) no-repeat;}
#loading div{width:0px;height:48px;background:url(./source/modules/baby/template/img/pro.gif) no-repeat;color:#fff;text-align:center;font-family:Tahoma;font-size:18px;line-height:48px;}
#message{width:300px;height:55px;font-family:"Microsoft Yahei",Arial,Helvetica,sans-serif,"宋体";font-size:16px;line-height:35px;text-align:center;margin-bottom:10px;}
.detail{text-align:left;width:96%;margin:10px auto;overflow:hidden;position:relative;border-radius:5px;-webkit-border-radius:5px;-moz-border-radius:5px;padding:0;}
.detail h3{text-align:left;line-height:28px;border-top:#A7190F solid 1px;border-bottom:#ccc solid 1px;font-size:16px;font-weight:bold;margin:5px 0;color:#A7190F;background-color:#eee;padding:3px 10px;}
.detail u{color:#A7190F;}
.detail dl{margin:0;padding:0;}
.detail li{text-align:left;font-size:14px;line-height:32px;margin-left:12px;border-bottom:#eee solid 1px;list-style:none;}button.blue-pill{background-color:#a5b8da;background-image:-webkit-gradient(linear,left top,left bottom,color-stop(0%,#a5b8da),color-stop(100%,#7089b3));background-image:-webkit-linear-gradient(top,#a5b8da,#7089b3);background-image:-moz-linear-gradient(top,#a5b8da,#7089b3);background-image:-ms-linear-gradient(top,#a5b8da,#7089b3);background-image:-o-linear-gradient(top,#a5b8da,#7089b3);background-image:linear-gradient(top,#a5b8da,#7089b3);border-top:1px solid #758fba;border-right:1px solid #6c84ab;border-bottom:1px solid #5c6f91;border-left:1px solid #6c84ab;border-radius:18px;-webkit-box-shadow:inset 0 1px 0 0 #aec3e5;box-shadow:inset 0 1px 0 0 #aec3e5;color:#fff;font-size:14px;padding:8px 0;margin:8px;text-align:center;text-shadow:0 -1px 1px #64799e;text-transform:uppercase;width:120px;}button.blue-pill:hover{background-color:#9badcc;background-image:-webkit-gradient(linear,left top,left bottom,color-stop(0%,#9badcc),color-stop(100%,#687fa6));background-image:-webkit-linear-gradient(top,#9badcc,#687fa6);background-image:-moz-linear-gradient(top,#9badcc,#687fa6);background-image:-ms-linear-gradient(top,#9badcc,#687fa6);background-image:-o-linear-gradient(top,#9badcc,#687fa6);background-image:linear-gradient(top,#9badcc,#687fa6);border-top:1px solid #6d86ad;border-right:1px solid #647a9e;border-bottom:1px solid #546685;border-left:1px solid #647a9e;-webkit-box-shadow:inset 0 1px 0 0 #a5b9d9;box-shadow:inset 0 1px 0 0 #a5b9d9;cursor:pointer;}button.blue-pill:active{border:1px solid #546685;-webkit-box-shadow:inset 0 0 8px 2px #7e8da6,0 1px 0 0 #eeeeee;box-shadow:inset 0 0 8px 2px #7e8da6,0 1px 0 0 #eeeeee;}
		 #tip img{width:100%;display: inline;}	
	#mask {
		position: fixed;
		top: 0;
		left: 0;
		width: 100%;
		height: 100%;
		display: none;
		background-color: #333;
		-moz-opacity: 0.9;
		opacity: 0.9;
		 z-index: 1;
	}
	
@charset "gb2312";
html, body, h1, h2, p, span, a, div, ol, ul, li, table, tbody, tfoot, thead, tr, th, td, canvas {
    margin: 0;
    padding: 0;
}
body {
    -moz-text-size-adjust: none;
    font-family: "Microsoft Yahei",Arial,Helvetica,sans-serif,"宋体";
    font-size-adjust: none;
    height: auto;
    text-align: center;
    width: 100%;
}
ol, ul {
    list-style: none outside none;
}
.remark {
    color: #999999;
    font-size: 12px;
}
.red {
    color: #FF0000;
}
.green {
    color: #008000;
}
a, a:visited {
    color: #545164;
    text-decoration: none;
}
dl a:visited {
    color: #777777;
    text-decoration: none;
}
#logo, #se_wrap, #se_inner, #se_bn, #foot, #foot p, #path {
    display: block;
}
#logo {
    margin: 5px auto;
    position: relative;
    text-align: center;
    width: 95%;
}
#se_box {
    height: auto;
    margin: 12px auto 0;
    overflow: hidden;
    width: 95%;
}
#se_wrap {
    background-color: #FFFFFF;
    border: 1px solid #6E6E6E;
    border-radius: 2px;
    box-shadow: 1px 1px 1px rgba(0, 0, 0, 0.2) inset;
    height: 34px;
    margin: 5px auto;
    overflow: hidden;
    padding: 5px 0 0 5px;
    position: relative;
    text-align: left;
    width: 95%;
}
#se_inner {
    background: none repeat scroll 0 0 rgba(0, 0, 0, 0);
    height: 39px;
    left: 0 !important;
    position: absolute;
    right: 74px !important;
    top: 0 !important;
}
.se-input {
    -moz-appearance: none;
    -moz-box-sizing: border-box;
    background-color: rgba(0, 0, 0, 0);
    border: 0 none;
    border-radius: 0;
    display: block;
    font-size: 18px;
    line-height: 24px;
    padding: 6px 25px 6px 6px;
    width: 100%;
}
#se_bn {
    -moz-appearance: none;
    -moz-border-bottom-colors: none;
    -moz-border-left-colors: none;
    -moz-border-right-colors: none;
    -moz-border-top-colors: none;
    -moz-box-sizing: border-box;
    background-size: 74px 39px;
    border-color: -moz-use-text-color -moz-use-text-color -moz-use-text-color #888888;
    border-image: none;
    border-radius: 0;
    border-style: none none none solid;
    border-width: 0 0 0 1px;
    font-size: 18px;
    height: 39px;
    position: absolute;
    right: 0;
    top: 0;
    width: 74px;
    z-index: 2;
}
#path {
    color: #545164;
    height: 30px;
    line-height: 30px;
    margin: 0 auto;
    position: relative;
    text-align: left;
    width: 95%;
}
#foot {
    color: #B4B4B4;
    font-size: 14px;
    height: 60px;
    line-height: 30px;
    text-align: center;
    width: 100%;
}
#foot p {
    display: block;
    line-height: 28px;
    margin: 0 7px;
    text-align: center;
}
#oly {
    height: auto;
    margin: 0 auto;
    width: 298px;
}
#oly a:active, .act a:active {
    background-color: rgba(190, 190, 190, 0.9);
}
#name {
    font-size: 14px;
    line-height: 30px;
    margin-top: 10px;
    text-align: center;
}
#ohot {
    margin-top: 10px;
    text-align: left;
}
#ohot a {
    display: inline-block;
    font-size: 14px;
    line-height: 36px;
    text-align: center;
    white-space: nowrap;
    width: 70px;
}
.detail {
    border-radius: 5px;
    margin: 10px auto;
    overflow: hidden;
    padding: 0;
    position: relative;
    text-align: left;
    width: 96%;
}
.detail h3 {
    background-color: #EEEEEE;
    border-bottom: 1px solid #CCCCCC;
    border-top: 1px solid #A7190F;
    color: #A7190F;
    font-size: 18px;
    font-weight: bold;
    line-height: 28px;
    margin: 5px 0;
    padding: 3px 10px;
    text-align: left;
}
.detail u, .detail h3 a {
    color: #A7190F;
}
.detail dl {
    margin: 0;
    padding: 0;
}
.detail dd {
    font-size: 14px;
    line-height: 28px;
    margin-left: 12px;
    text-align: left;
}
dd.option {
    font-size: 16px;
    line-height: 28px;
}
.detail li {
    border-bottom: 1px solid #EEEEEE;
    font-size: 14px;
    line-height: 32px;
    list-style: none outside none;
    margin-left: 12px;
    text-align: left;
}
.detail dd strong {
    font-weight: bold;
}
.fenye {
    margin: 10px;
    text-align: center;
}
.fenye a {
    border: 1px solid #CCCCCC;
    padding: 5px;
}
.loading {
}
.ceshi_start {
    background: none repeat scroll 0 0 #FFFFFF;
    border: 1px solid #A7190F;
    border-radius: 5px;
    color: #333333;
    display: block;
    font-size: 14px;
    height: 40px;
    line-height: 40px;
    margin: 10px auto;
    overflow: hidden;
    text-align: center;
    text-decoration: none;
    width: 85%;
}
.sug {
    border-bottom: 1px solid #D3D3D3;
    color: #555555;
    font-size: 16px;
    line-height: 26px;
    padding: 6px 5px;
    position: relative;
    text-align: left;
}
.sug a {
    display: block;
}

	.game{
display:inlineblock; 
margin:5px 0px; 
padding-left:20px;width:100%; 
font-size:30px; 
overflow:hidden; 
border-bottom:1px solid #fff; 
text-align:left;
}
</style>
	</head>
 <body screen_capture_injected="true">
<div id="ceshuResult"></div>



<div class="detail" id="first">
<h3>测测你未来的小孩长啥样</h3>
<dl>
  <dd><div style="float:right;padding:5px;"><img src="./source/modules/baby/template/mobile/baby.jpg" width="120"></div>&nbsp;&nbsp;&nbsp;&nbsp;你是否也会在某一时刻很想知道自己未来的小孩长什么样？赶紧来做个测试吧！<br/>&#160;&#160;&#160;&#160;通过对你的 <strong>头像和相册</strong> 进行分析，测测你未来的小孩什么样。</dd><dd><a href="javascript:;" class="ceshi_start" id="starts">开始测试</a></dd>
</dl>
</div>

<div id="second" style="display:none;">
	<div id="jindu"> 
		<div id="message">正在对你的 <strong>头像和相册</strong> 进行分析...</div> 
		<div id="loading"><div></div></div> 
	</div> 

	<div id="xiaohai" style="display:none;">
		<center>
		<div class="info">原来你未来的小孩是这个样子的呀，快来揭开面纱！摸一摸有惊喜！<br/>↓ ↓ ↓ ↓ ↓ ↓ ↓ ↓</div>
		<canvas id="main"></canvas> 
		<div class="button">
		<button class="blue-pill" onClick="javascript:mask();">秀给朋友</button><br>
		
		</div>
		</center>
	</div>

</div>
      <script type="text/javascript">
		var mask = function () {
                if (document.getElementById('mask').style.display == 'inline') {
                    document.getElementById('mask').style.display = 'none';
                    document.getElementById('tip').style.display = 'none';
                } else {
                    document.getElementById('mask').style.display = 'inline';
                    document.getElementById('tip').style.display = 'inline';
                }
            }

            var share = function () {
                mask();
            }
		var progress_id = "loading"; 
		function SetProgress(progress) { 
			if (progress) { 
				$("#" + progress_id + " > div").css("width", String(progress) + "%"); //控制#loading div宽度 
				$("#" + progress_id + " > div").html(String(progress) + "%"); //显示百分比 
			} 
		} 
		var i = 0; 
		function doProgress() { 
			if (i > 100) { 
				$("#jindu").hide();
				$("#xiaohai").show(); 
				$("#more").show(); 
				return; 
			} 
			if (i <= 100) { 
				setTimeout("doProgress()", 25); 
				SetProgress(i); 
				i++; 
			} 
		} 
		$('#starts').click(function(){
			$("#first").hide();
			$("#second").show();
			doProgress();
			var nums = Math.floor(2+Math.random()*(32-2));
			$("#infos").removeAttr("num");
			$("#infos").attr("num", nums);
			var backimage = { 'url':_config['isSite']+'vapp/25/'+nums+'.jpg', 'img': null };
			var canvas = {'temp': null, 'draw': null}; 
			var mouseDown = false;    
			// canvas 合成    
			function recompositeCanvases() {
				var main = document.getElementById('main');
				var tempctx = canvas.temp.getContext('2d');
				var mainctx = main.getContext('2d');
				// clear the temp
				canvas.temp.width = canvas.temp.width;
				// 把 canvas.draw 覆蓋到 drawImage 上
				tempctx.drawImage(canvas.draw, 0, 0);
				// 以 source-atop 的方式把 backimage 畫到 tempctx 上
				tempctx.globalCompositeOperation = 'source-atop';
				tempctx.drawImage(backimage.img, 0, 0);
				// mainctx => 灰色前景 (還沒有刮掉的地方)
				mainctx.fillStyle = "#ccc";
				mainctx.fillRect(0, 0, backimage.img.width, backimage.img.height);
				// 最後把 canvas.temp 覆蓋到 mainctx 上
				mainctx.drawImage(canvas.temp, 0, 0);
			}
			// 畫線
			function scratch(canv, x, y, fresh) {
				var ctx = canv.getContext('2d');        
				// 畫筆大小, 形狀...
				ctx.lineWidth = 50;
				ctx.lineCap = ctx.lineJoin = 'round';
				if (fresh) {
					ctx.beginPath();
					// 為了模擬滑動，所以在 x 加上 0.01，不然點一下不會產生反應
					ctx.moveTo(x+0.01, y);
				}
				ctx.lineTo(x, y);
				ctx.stroke();
			}
			function setupCanvases() {
				var c = document.getElementById('main');
				// 取得圖片長寬
				c.width = backimage.img.width;
				c.height = backimage.img.height;
				canvas.temp = document.createElement('canvas');
				canvas.draw = document.createElement('canvas');
				canvas.temp.width = canvas.draw.width = c.width;
				canvas.temp.height = canvas.draw.height = c.height;
				recompositeCanvases();
				function mousedown_handler(e) {
					var local = getLocalCoords(c, e);
					mouseDown = true;
					scratch(canvas.draw, local.x, local.y, true);
					recompositeCanvases();
					if (e.cancelable) { e.preventDefault(); } 
					return false;
				};
				function mousemove_handler(e) {
					if (!mouseDown) { return true; }
					var local = getLocalCoords(c, e);
					scratch(canvas.draw, local.x, local.y, false);
					recompositeCanvases();
					if (e.cancelable) { e.preventDefault(); } 
					return false;
				};
				function mouseup_handler(e) {
					if (mouseDown) {
						mouseDown = false;
						if (e.cancelable) { e.preventDefault(); } 
						return false;
					}
					return true;
				};
				// mouse handlers
				c.addEventListener('mousedown', mousedown_handler, false);
				c.addEventListener('touchstart', mousedown_handler, false);
				window.addEventListener('mousemove', mousemove_handler, false);
				window.addEventListener('touchmove', mousemove_handler, false);
				window.addEventListener('mouseup', mouseup_handler, false);
				window.addEventListener('touchend', mouseup_handler, false);
			}
			// 取得座標
			function getLocalCoords(elem, ev) {
				var ox = 0, oy = 0;
				var first;
				var pageX, pageY;
				while (elem != null) {
					ox += elem.offsetLeft;
					oy += elem.offsetTop;
					elem = elem.offsetParent;
				}
				if (ev.hasOwnProperty('changedTouches')) {
					first = ev.changedTouches[0];
					pageX = first.pageX;
					pageY = first.pageY;
				} else {
					pageX = ev.pageX;
					pageY = ev.pageY;
				}
				return { 'x': pageX - ox, 'y': pageY - oy };
			}
			// 動態生一個 img 出來
			backimage.img = document.createElement('img'); 
			backimage.img.addEventListener('load', setupCanvases, false);
			backimage.img.src = backimage.url;  
		});
 
      </script>

<div id="mask" onclick="mask();" style="display:none;"></div>
<div id="tip" onclick="mask();" style="display:none;left: 0;position: fixed;top: 0;width:100%; z-index: 1;"><img src="./source/modules/baby/template/img/tip-share.jpg"/></div>

<div id="infos" style="display:none" num="2"></div>


</body>

</html>
